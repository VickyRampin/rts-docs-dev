"use strict";(self.webpackChunkrts_docs=self.webpackChunkrts_docs||[]).push([["324"],{56198(e,s,n){n.r(s),n.d(s,{metadata:()=>t,default:()=>h,frontMatter:()=>o,contentTitle:()=>i,toc:()=>l,assets:()=>c});var t=JSON.parse('{"id":"hpc/storage/data_transfers","title":"Data Transfers","description":"Globus is the recommended tool to use for large-volume data transfers due to the efficiency, reliability, security and ease of use. Use other tools only if you really need to. Detailed instructions available at Globus","source":"@site/docs/hpc/03_storage/02_data_transfers.md","sourceDirName":"hpc/03_storage","slug":"/hpc/storage/data_transfers","permalink":"/docs/hpc/storage/data_transfers","draft":false,"unlisted":false,"editUrl":"https://github.com/NYU-RTS/rts-docs/blob/main/docs/hpc/03_storage/02_data_transfers.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"hpcSidebar","previous":{"title":"HPC Storage","permalink":"/docs/hpc/storage/intro_and_data_management"},"next":{"title":"Globus","permalink":"/docs/hpc/storage/globus"}}'),a=n(62615),r=n(30416);let o={},i="Data Transfers",c={},l=[{value:"Data-Transfer nodes",id:"data-transfer-nodes",level:2},{value:"Data Transfer Node Access",id:"data-transfer-node-access",level:3},{value:"Tools for Data Transfer",id:"tools-for-data-transfer",level:2},{value:"Linux &amp; Mac Tools",id:"linux--mac-tools",level:3},{value:"scp and rsync",id:"scp-and-rsync",level:4},{value:"Windows Tools",id:"windows-tools",level:3},{value:"File Transfer Clients",id:"file-transfer-clients",level:4},{value:"Globus",id:"globus",level:3},{value:"rclone",id:"rclone",level:3},{value:"Open OnDemand (OOD)",id:"open-ondemand-ood",level:3},{value:"FDT",id:"fdt",level:3},{value:"Copying Data from the Greene HPC Cluster to Torch HPC Cluster",id:"copying-data-from-the-greene-hpc-cluster-to-torch-hpc-cluster",level:2},{value:"Copying Data to Torch via the Command Line",id:"copying-data-to-torch-via-the-command-line",level:3},{value:"Copying Data to Torch via Globus",id:"copying-data-to-torch-via-globus",level:2},{value:"File Transfer (Torch \u2194 Greene)",id:"file-transfer-torch--greene",level:2}];function d(e){let s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"data-transfers",children:"Data Transfers"})}),"\n",(0,a.jsx)(s.admonition,{title:"Globus",type:"tip",children:(0,a.jsxs)(s.p,{children:["Globus is the recommended tool to use for large-volume data transfers due to the efficiency, reliability, security and ease of use. Use other tools only if you really need to. Detailed instructions available at ",(0,a.jsx)(s.a,{href:"/docs/hpc/storage/globus",children:"Globus"})]})}),"\n",(0,a.jsx)(s.h2,{id:"data-transfer-nodes",children:"Data-Transfer nodes"}),"\n",(0,a.jsxs)(s.p,{children:["Attached to the NYU HPC cluster Torch, the Torch Data Transfer Node (DTN) are  nodes optimized for transferring data between cluster file systems (e.g. scratch)  and other endpoints outside the NYU HPC clusters, including user laptops and desktops. The gDTNs have 100-Gb/s Ethernet connections to the High Speed Research Network (HSRN) and are connected to the HDR Infiniband fabric of the HPC clusters. More information on the hardware characteristics is available at ",(0,a.jsx)(s.a,{href:"/docs/hpc/spec_sheet",children:"Torch spec sheet"}),"."]}),"\n",(0,a.jsx)(s.h3,{id:"data-transfer-node-access",children:"Data Transfer Node Access"}),"\n",(0,a.jsxs)(s.p,{children:["The HPC cluster filesystems include ",(0,a.jsx)(s.code,{children:"/home"}),", ",(0,a.jsx)(s.code,{children:"/scratch"}),", ",(0,a.jsx)(s.code,{children:"/archive"})," and the ",(0,a.jsx)(s.a,{href:"/docs/hpc/storage/research_project_space",children:"HPC Research Project Space"})," are available on the DTN. The Data-Transfer Node (DTN) can be accessed in a variety of ways"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["From NYU-net and the High Speed Research Network: use SSH to the DTN hostname ",(0,a.jsx)(s.code,{children:"dtn.torch.hpc.nyu.edu"})," which resolves to either ",(0,a.jsx)(s.code,{children:"dtn011.hpc.nyu.edu"})," or ",(0,a.jsx)(s.code,{children:"dtn012.hpc.nyu.edu"})]}),"\n"]}),"\n",(0,a.jsxs)(s.admonition,{type:"info",children:[(0,a.jsx)(s.p,{children:"For example, to log in to a DTN from the Torch cluster, to carry out some copy operation, and to log back out, you can use a command sequence like:"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:"ssh dtn.torch.hpc.nyu.edu\nrsync ...\nlogout\n"})})]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Via specific tools like ",(0,a.jsx)(s.a,{href:"#globus",children:"Globus"})]}),"\n"]}),"\n",(0,a.jsx)(s.h2,{id:"tools-for-data-transfer",children:"Tools for Data Transfer"}),"\n",(0,a.jsx)(s.h3,{id:"linux--mac-tools",children:"Linux & Mac Tools"}),"\n",(0,a.jsx)(s.h4,{id:"scp-and-rsync",children:"scp and rsync"}),"\n",(0,a.jsx)(s.admonition,{type:"warning",children:(0,a.jsx)(s.p,{children:"Please use Data Transfer Nodes (DTNs) with these tools. While one can transfer data while on login nodes, it is  considered a bad practice because it can degrade the node's performance."})}),"\n",(0,a.jsxs)(s.p,{children:["Sometimes these two tools are convenient for transferring small files. Using the DTNs does not require to set up an SSH tunnel; use the hostname ",(0,a.jsx)(s.code,{children:"dtn.torch.hpc.nyu.edu"})," for one-step copying. See below for examples of commands invoked on the command line on a laptop running a Unix-like operating system:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:"rsync -av HMLHWBGX7_n01_HK16.fastq.gz jdoe55@dtn.torch.hpc.nyu.edu:/scratch/jdoe55/ \n"})}),"\n",(0,a.jsx)(s.p,{children:"In particular, rsync can also be used on the DTNs to copy directories recursively between filesystems, e.g. (assuming that you are logged in to a DTN),"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-sh",children:"rsync -av /scratch/username/project1 /rw/sharename/\n"})}),"\n",(0,a.jsx)(s.p,{children:"where username would be your user name, project1 a directory to be copied to the Research Workspace, and sharename the name of a share on the Research Workspace (either your NetID or the name of a project you're a member of)."}),"\n",(0,a.jsx)(s.h3,{id:"windows-tools",children:"Windows Tools"}),"\n",(0,a.jsx)(s.h4,{id:"file-transfer-clients",children:"File Transfer Clients"}),"\n",(0,a.jsxs)(s.p,{children:["Windows 10 machines may have the Linux Subsystem installed, which will allow for the use of Linux tools, as listed above, but generally it is recommended to use a client such as ",(0,a.jsx)(s.a,{href:"https://winscp.net/eng/docs/tunneling",children:"WinSCP"})," or ",(0,a.jsx)(s.a,{href:"https://filezilla-project.org/",children:"FileZilla"})," to transfer data. Additionally, Windows users may also take advantage of ",(0,a.jsx)(s.a,{href:"/docs/hpc/storage/globus",children:"Globus"})," to transfer files."]}),"\n",(0,a.jsx)(s.h3,{id:"globus",children:"Globus"}),"\n",(0,a.jsx)(s.p,{children:"Globus is the recommended tool to use for large-volume data transfers. It features automatic performance tuning and automatic retries in cases of file-transfer failures. Data-transfer tasks can be submitted via a web portal. The Globus service will take care of the rest, to make sure files are copied efficiently, reliably, and securely. Globus is also a tool for you to share data with collaborators, for whom you only need to provide the email addresses."}),"\n",(0,a.jsxs)(s.p,{children:["The Globus endpoint for Torch is available at ",(0,a.jsx)(s.code,{children:"nyu#torch"}),". Detailed instructions available at ",(0,a.jsx)(s.a,{href:"/docs/hpc/storage/globus",children:"Globus"})]}),"\n",(0,a.jsx)(s.h3,{id:"rclone",children:"rclone"}),"\n",(0,a.jsxs)(s.p,{children:["rclone - rsync for cloud storage, is a command line program to sync files and directories to and from cloud storage systems such as Google Drive, Amazon Drive, S3, B2 etc. rclone is available on DTNs. ",(0,a.jsx)(s.a,{href:"https://rclone.org/",children:"Please see the documentation for how to use it."})]}),"\n",(0,a.jsx)(s.h3,{id:"open-ondemand-ood",children:"Open OnDemand (OOD)"}),"\n",(0,a.jsxs)(s.p,{children:["One can use ",(0,a.jsx)(s.a,{href:"/docs/hpc/ood/ood_intro",children:"Open OnDemand (OOD)"})," interface to upload data."]}),"\n",(0,a.jsx)(s.admonition,{type:"warning",children:(0,a.jsx)(s.p,{children:"Please only use OOD for small data transfers!  Please use Data-Transfer Nodes (DTNs) for moving large data."})}),"\n",(0,a.jsx)(s.h3,{id:"fdt",children:"FDT"}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.a,{href:"https://fast-data-transfer.github.io/",children:"FDT"}),' stands for "Fast Data Transfer". It is a command line application written in Java. With the plugin mechanism, FDT allows users to load user-defined classes for Pre- and Post-Processing of file transfers. Users can start their own server processes. If you have use cases for FDT, visit the ',(0,a.jsx)(s.a,{href:"https://github.com/fast-data-transfer/fdt/releases",children:"download page"})," to get ",(0,a.jsx)(s.code,{children:"fdt.jar"})," to start. Please contact ",(0,a.jsx)(s.a,{href:"mailto:hpc@nyu.edu",children:"hpc@nyu.edu"})," for any questions."]}),"\n",(0,a.jsx)(s.h2,{id:"copying-data-from-the-greene-hpc-cluster-to-torch-hpc-cluster",children:"Copying Data from the Greene HPC Cluster to Torch HPC Cluster"}),"\n",(0,a.jsx)(s.h3,{id:"copying-data-to-torch-via-the-command-line",children:"Copying Data to Torch via the Command Line"}),"\n",(0,a.jsx)(s.p,{children:"Torch has an available data transfer node (DTN) that can be used to upload data. You must authenticate similarly to the steps outlined on the Accessing Torch page."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"netid@localpc ~ $ rsync -avz -e ssh ~/testfile.txt netid@dtn012.hpc.nyu.edu:/scratch/netid/testfile.txt\n(netid@dtn012.hpc.nyu.edu) Authenticate with PIN BUUM5YHJX at https://microsoft.com/devicelogin and press ENTER.\ntestfile.txt \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0100% \xa0 \xa00 \xa0 \xa0 0.0KB/s \xa0 00:00\nnetid@localpc ~ $\n"})}),"\n",(0,a.jsx)(s.h2,{id:"copying-data-to-torch-via-globus",children:"Copying Data to Torch via Globus"}),"\n",(0,a.jsxs)(s.p,{children:["Globus has been installed for Torch - you can log in at ",(0,a.jsx)(s.a,{href:"https://globus.org/",children:"https://globus.org/"})," and search for the Torch home, scratch, or archive collections under nyu#torch.\u200B"]}),"\n",(0,a.jsx)(s.p,{children:"Globus works much the same as it did on Greene, so see our previous page on how to use it. Once you install Globus Connect Personal on your personal device you can easily transfer files between your local machine and Torch."}),"\n",(0,a.jsx)(s.h2,{id:"file-transfer-torch--greene",children:"File Transfer (Torch \u2194 Greene)"}),"\n",(0,a.jsx)(s.p,{children:"To ease data transfer between clusters, Torch storage has been mounted on the Greene Data Transfer Nodes (e.g. dtn-1.hpc.nyu.edu and dtn-2.hpc.nyu.edu)."}),"\n",(0,a.jsx)(s.p,{children:"This allows users to access the data under /torch:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"[netid@dtn-1]$ ls /torch\narchive  home  scratch  share\n"})}),"\n",(0,a.jsx)(s.p,{children:"You can copy files using the rsync command from the Greene DTN:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"[netid@dtn-1]$ rsync /scratch/netid/my_file.txt /torch/scratch/netid/my_file.txt\n"})})]})}function h(e={}){let{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},30416(e,s,n){n.d(s,{R:()=>o,x:()=>i});var t=n(59471);let a={},r=t.createContext(a);function o(e){let s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);