<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cloud/dataproc/computation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Computation | Connecting researchers to computational resources.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://services.rt.nyu.edu/img/NYU.svg"><meta data-rh="true" name="twitter:image" content="https://services.rt.nyu.edu/img/NYU.svg"><meta data-rh="true" property="og:url" content="https://services.rt.nyu.edu/docs/cloud/dataproc/computation/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Computation | Connecting researchers to computational resources."><meta data-rh="true" name="description" content="MapReduce"><meta data-rh="true" property="og:description" content="MapReduce"><link data-rh="true" rel="icon" href="/img/NYU.ico"><link data-rh="true" rel="canonical" href="https://services.rt.nyu.edu/docs/cloud/dataproc/computation/"><link data-rh="true" rel="alternate" href="https://services.rt.nyu.edu/docs/cloud/dataproc/computation/" hreflang="en"><link data-rh="true" rel="alternate" href="https://services.rt.nyu.edu/docs/cloud/dataproc/computation/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Computation","item":"https://services.rt.nyu.edu/docs/cloud/dataproc/computation"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Connecting researchers to computational resources. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Connecting researchers to computational resources. Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2DXB3BDH70"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2DXB3BDH70",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.f829a653.css">
<script src="/assets/js/runtime~main.1423adea.js" defer="defer"></script>
<script src="/assets/js/main.1b6e9861.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/NYU.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_TUNJ" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/NYU.svg" alt="NYU torch logo" class="themedComponent_adik themedComponent--light_G91j"><img src="/img/NYU.svg" alt="NYU torch logo" class="themedComponent_adik themedComponent--dark_ZN7y"></div><b class="navbar__title text--truncate">Research Technology Services</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/genai/getting_started/intro/">Pythia</a><a class="navbar__item navbar__link" href="/docs/hpc/getting_started/intro/">HPC</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/cloud/getting_started/intro/">Cloud</a><a class="navbar__item navbar__link" href="/docs/srde/getting_started/intro/">SRDE</a><a href="https://hsrn.nyu.edu/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HSRN<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/blog/">Announcements</a><div class="toggle_jqKN colorModeToggle_gY5u"><button class="clean-btn toggleButton_lieL toggleButtonDisabled_sjb2" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_AmaU lightToggleIcon_PUFc"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_AmaU darkToggleIcon_woI4"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_AmaU systemToggleIcon_QZRn"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_gKxF"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_necp"><div class="docsWrapper_wAz_"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_QBOB" type="button"></button><div class="docRoot_gn_g"><aside class="theme-doc-sidebar-container docSidebarContainer_RCWh"><div class="sidebarViewport_BocM"><div class="sidebar_w3s6"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_EeVB"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_HmkA menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cloud/getting_started/intro/"><span title="Getting Started" class="categoryLinkLabel_vKI6">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_HmkA menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cloud/gcp_self_managed/intro/"><span title="GCP self-managed projects" class="categoryLinkLabel_vKI6">GCP self-managed projects</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_HmkA menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cloud/hpc_bursting_to_cloud/intro/"><span title="HPC bursting to cloud" class="categoryLinkLabel_vKI6">HPC bursting to cloud</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_HmkA menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/cloud/dataproc/intro/"><span title="Dataproc" class="categoryLinkLabel_vKI6">Dataproc</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cloud/dataproc/intro/"><span title="Dataproc" class="linkLabel_BOGb">Dataproc</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cloud/dataproc/data_management/"><span title="Data management" class="linkLabel_BOGb">Data management</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/cloud/dataproc/computation/"><span title="Computation" class="linkLabel_BOGb">Computation</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_HmkA menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/cloud/on_prem_cloud/intro/"><span title="Research Technology Cloud" class="categoryLinkLabel_vKI6">Research Technology Cloud</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_M8Os"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_dZwW"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_cg7U"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_l9oI"><div class="docItemContainer_ENRc"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_N0Nx" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_CnUo"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Dataproc</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Computation</span></li></ul></nav><div class="tocCollapsible_lcDd theme-doc-toc-mobile tocMobile_o_ql"><button type="button" class="clean-btn tocCollapsibleButton_A397">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Computation</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="mapreduce">MapReduce<a href="#mapreduce" class="hash-link" aria-label="Direct link to MapReduce" title="Direct link to MapReduce" translate="no">​</a></h2>
<p>MapReduce is a programming model and an associated implementation for processing and generating large datasets with a parallel, distributed algorithm on a cluster.</p>
<p>A MapReduce job splits a large dataset into independent chunks and organizes them into key-value pairs for parallel processing. The mapping and reducing functions receive not just values, but (key, value) pairs.</p>
<p>Every MapReduce job consists of at least two parts:</p>
<ul>
<li class=""><strong>Mapping Phase</strong>: Takes input as (key,value) pairs, processes them, and produces another set of intermediate (key,value) pairs as output.</li>
<li class=""><strong>Reducing Phase</strong>: Reducing lets you aggregate values together. A reducer function receives an iterator of input values from an input list. It then combines these values together, returning a single output value.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_wKjT" id="mapreduce-word-count-example">MapReduce Word Count Example<a href="#mapreduce-word-count-example" class="hash-link" aria-label="Direct link to MapReduce Word Count Example" title="Direct link to MapReduce Word Count Example" translate="no">​</a></h3>
<p>Ingest a text file into HDFS.  In the below example, the hdfs -put command is combined with another Unix command (curl) to send a copy of a Sherlock Holmes book (located at the URL <a href="https://www.gutenberg.org/files/1661/1661-0.txt" target="_blank" rel="noopener noreferrer" class="">https://www.gutenberg.org/files/1661/1661-0.txt</a>) directly into HDFS:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-o</span><span class="token plain"> input.txt https://www.gutenberg.org/files/1661/1661-0.txt</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-put</span><span class="token plain"> input.txt</span><br></span></code></pre></div></div>
<p>The following command will run an example Word Count job (described in more detail <a href="https://cwiki.apache.org/confluence/display/HADOOP2/WordCount" target="_blank" rel="noopener noreferrer" class="">here</a>) with the Sherlock Holmes book as its input.</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hadoop jar /usr/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar wordcount </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-D</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">mapreduce.job.maps</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">6</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-D</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">mapreduce.job.reduces</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"> /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/input.txt /user/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu/output</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="spark">Spark<a href="#spark" class="hash-link" aria-label="Direct link to Spark" title="Direct link to Spark" translate="no">​</a></h2>
<p>Apache Spark is an open-source unified analytics engine for large-scale data processing. Spark provides an interface for programming entire clusters with implicit data parallelism and fault tolerance. Originally developed at the University of California, Berkeley&#x27;s AMPLab, the Spark codebase was later donated to the Apache Software Foundation, which has maintained it since. (source: <a href="https://en.wikipedia.org/wiki/Apache_Spark" target="_blank" rel="noopener noreferrer" class="">Wikipedia</a>)</p>
<h3 class="anchor anchorTargetStickyNavbar_wKjT" id="launching-an-interactive-spark-shell">Launching an Interactive Spark Shell<a href="#launching-an-interactive-spark-shell" class="hash-link" aria-label="Direct link to Launching an Interactive Spark Shell" title="Direct link to Launching an Interactive Spark Shell" translate="no">​</a></h3>
<p>Spark provides an interactive shell that you can use to learn the Spark API and analyze datasets interactively. To connect to Spark Shell from the command line, execute the following command:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">spark-shell --deploy-mode client --num-executors</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token number" style="color:hsl(35, 99%, 36%)">1</span><span class="token plain"> --driver-memory</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">1G --executor-memory</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">1G</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_nT0D alert alert--success"><div class="admonitionHeading_v1P0"><span class="admonitionIcon_Vpqq"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_kdNk"><p>NYU Dataproc deploys Spark applications in cluster mode by default.  The following error indicates that you are trying to deploy an interactive shell, which must use client mode:</p></div></div>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Exception </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> thread </span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;main&quot;</span><span class="token plain"> org.apache.spark.SparkException: Cluster deploy mode is not applicable to Spark shells.</span><br></span></code></pre></div></div>
<p>To resolve this error, either use the command line flag indicated above (<code>--deploy-mode client</code>) or set the <code>spark.submit.deployMode</code> property in your Spark configuration to client. More details about the difference between cluster and client mode can be found <a href="https://spark.apache.org/docs/latest/running-on-yarn.html#launching-spark-on-yarn" target="_blank" rel="noopener noreferrer" class="">here</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="yarn-scheduler">YARN Scheduler<a href="#yarn-scheduler" class="hash-link" aria-label="Direct link to YARN Scheduler" title="Direct link to YARN Scheduler" translate="no">​</a></h2>
<p>YARN is the resource manager and job scheduler in the Hadoop cluster. YARN allows you to use various data processing engines for batch, interactive, and real-time stream processing of data stored in HDFS.</p>
<ul>
<li class="">Application status and logs: Please find the list of current running apps using &#x27;Yarn&#x27; script. Running the yarn script without any arguments prints the description for all commands</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">yarn</span><span class="token plain"> application </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-list</span><span class="token plain"> </span><br></span></code></pre></div></div>
<ul>
<li class="">To kill a currently running app because the submitted app started malfunctioning or in worst case scenario, it&#x27;s stuck in an infinite loop. Get the app ID and then kill it as given below</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">yarn</span><span class="token plain"> application </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-kill</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">application_ID</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<ul>
<li class="">To download application logs for examination on the command line</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">yarn</span><span class="token plain"> logs </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-applicationId</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">application_ID</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="using-hive">Using Hive<a href="#using-hive" class="hash-link" aria-label="Direct link to Using Hive" title="Direct link to Using Hive" translate="no">​</a></h2>
<p>Apache Hive is a data warehouse software package that facilitates querying and managing large datasets residing in distributed storage (i.e., HDFS). Hive provides a mechanism to project structure onto this data and query the data using a SQL-like language called Hive Query Language (HiveQL or HQL).</p>
<p>You can access Hive with the following command:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">beeline </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-u</span><span class="token plain"> jdbc:hive2://localhost:10000</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">: jdbc:hive2://localhost:1000</span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">0</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> use </span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">: jdbc:hive2://localhost:1000</span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">0</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> show tables</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">: jdbc:hive2://localhost:1000</span><span class="token operator file-descriptor important" style="color:hsl(230, 8%, 24%);font-weight:bold">0</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(221, 87%, 60%)">!</span><span class="token plain">quit</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Closing: </span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain">: jdbc:hive2://localhost:10000</span><br></span></code></pre></div></div>
<p>It is important to note that in order to exit properly from a beeline session, you type <code>!quit</code>.</p>
<p>If you are planning on using SerDe to query/work with JSON files, you will need to run the following code at the Beeline prompt first in order to ensure that the JsonSerDe class is loaded:</p>
<div class="language-sql codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sql codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token keyword" style="color:hsl(301, 63%, 40%)">ADD</span><span class="token plain"> JAR </span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">usr</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">lib</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">hive</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">lib</span><span class="token operator" style="color:hsl(221, 87%, 60%)">/</span><span class="token plain">hive</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain">hcatalog</span><span class="token operator" style="color:hsl(221, 87%, 60%)">-</span><span class="token plain">core</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">.</span><span class="token plain">jar</span><br></span></code></pre></div></div>
<p>See <a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-RowFormats&amp;SerDe" target="_blank" rel="noopener noreferrer" class="">here</a> for more information.</p>
<p>Access to Hive databases on NYU Dataproc is derived from HDFS permissions because we use <a href="http://storagebasedauthorizationprovider/" target="_blank" rel="noopener noreferrer" class="">Storage-Based Authorization</a>. To grant read-only access to a Hive database to someone other than yourself, you can run the following command:</p>
<div class="language-text codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-text codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">hdfs dfs -setfacl -R -m user:&lt;OTHER_PERSON_NETID&gt;_nyu_edu:r-x /user/hive/warehouse/NetID_nyu_edu.db</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_nT0D alert alert--warning"><div class="admonitionHeading_v1P0"><span class="admonitionIcon_Vpqq"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_kdNk"><p>Outside of NYU, other Hadoop installations may use a different mechanism to share databases with other colleagues– it is common for Hadoop installations to use a SQL style grant/revoke mechanism for sharing databases (<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Authorization#LanguageManualAuthorization-2SQLStandardsBasedAuthorizationinHiveServer2" target="_blank" rel="noopener noreferrer" class="">SQL Standards Based Authorization</a>).  This mechanism is not used at NYU and it is important to bear in mind that external documentation referring to grant/revoke statements is not applicable to NYU Dataproc.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="using-trino">Using Trino<a href="#using-trino" class="hash-link" aria-label="Direct link to Using Trino" title="Direct link to Using Trino" translate="no">​</a></h2>
<p>Trino is a distributed SQL query engine designed to query large data sets distributed over one or more heterogeneous data sources.  To access Trino, you can type the following command:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">trino</span><br></span></code></pre></div></div>
<p>Once you are inside, you can reference multiple data sources through catalogs (see here).  For instance, you may want to query Hive using Trino.  You can select a database to use through a fully-qualified database or table name as shown in the code below:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">trino</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> show catalogs</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">       Catalog        </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">----------------------</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> bigquery             </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> bigquery_public_data </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> hive                 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> mastersql            </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> memory               </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> system               </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> tpcds                </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"> tpch                 </span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">8</span><span class="token plain"> rows</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Query 20240827_132732_00001_ygn47, FINISHED, </span><span class="token number" style="color:hsl(35, 99%, 36%)">2</span><span class="token plain"> nodes</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Splits: </span><span class="token number" style="color:hsl(35, 99%, 36%)">20</span><span class="token plain"> total, </span><span class="token number" style="color:hsl(35, 99%, 36%)">20</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">done</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token number" style="color:hsl(35, 99%, 36%)">100.00</span><span class="token plain">%</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"></span><span class="token number" style="color:hsl(35, 99%, 36%)">0.17</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> rows, 0B</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token number" style="color:hsl(35, 99%, 36%)">0</span><span class="token plain"> rows/s, 0B/s</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">trino</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain"> use hive.</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">netid</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">_nyu_edu</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">USE</span><br></span></code></pre></div></div>
<p>You can also specify a catalog / data source that you want to use on the command line when you start Trino:</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">trino </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--catalog</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">hive</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="using-conda">Using Conda<a href="#using-conda" class="hash-link" aria-label="Direct link to Using Conda" title="Direct link to Using Conda" translate="no">​</a></h2>
<p>NYU Dataproc comes with <code>miniconda3</code> by default. This can be used to manage Python packages within your filesystem home directory. See <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/getting-started.html" target="_blank" rel="noopener noreferrer" class="">here</a> or <a class="" href="/docs/hpc/tools_and_software/conda_environments/">here</a> for more information on the conda command.</p>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="using-jupyter-notebooks">Using Jupyter Notebooks<a href="#using-jupyter-notebooks" class="hash-link" aria-label="Direct link to Using Jupyter Notebooks" title="Direct link to Using Jupyter Notebooks" translate="no">​</a></h2>
<ul>
<li class="">Log into the Dataproc cluster and run jupyter-notebook. Do not close the command line interface where jupyter-notebook is running until you&#x27;re done using Jupyter.</li>
<li class="">From the output produced by jupyter-notebook, obtain the port number that the notebook is running on.  In the example below, for instance, the notebook is running on port <code>8888</code>:</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    To access the notebook, </span><span class="token function" style="color:hsl(221, 87%, 60%)">open</span><span class="token plain"> this </span><span class="token function" style="color:hsl(221, 87%, 60%)">file</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(301, 63%, 40%)">in</span><span class="token plain"> a browser:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        file:///home/NetID_nyu_edu/.local/share/jupyter/runtime/nbserver-7866-open.html</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">    Or copy and </span><span class="token function" style="color:hsl(221, 87%, 60%)">paste</span><span class="token plain"> one of these URLs:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">        http://localhost:8888/?token</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">90d9c6297ba2c963cdb998ae374041384bac71c781b18ed1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">     or http://127.0.0.1:8888/?token</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">90d9c6297ba2c963cdb998ae374041384bac71c781b18ed1</span><br></span></code></pre></div></div>
<ul>
<li class="">On an individual workstation that has the gcloud command installed (installation instructions for gcloud can be found here), run the following command (with PORT replaced with the port number from step 2):</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud compute </span><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> nyu-dataproc-m </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--project</span><span class="token plain"> hpc-dataproc-19b8 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--zone</span><span class="token plain"> us-central1-f -- </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-L</span><span class="token plain"> PORT:localhost:PORT</span><br></span></code></pre></div></div>
<ul>
<li class="">In our example, from the output in step 2 this command would be as follows:</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud compute </span><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> nyu-dataproc-m </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--project</span><span class="token plain"> hpc-dataproc-19b8 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--zone</span><span class="token plain"> us-central1-f -- </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-L</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">8888</span><span class="token plain">:localhost:8888</span><br></span></code></pre></div></div>
<ul>
<li class="">You can then use the URLs from the jupyter-notebook output in step 2 (e.g., <code>http://localhost:8888/?token=90d9c6297ba2c963cdb998ae374041384bac71c781b18ed1</code>) to access your notebook from the workstation.</li>
<li class="">When you are done, you can exit the terminals where the jupyter-notebook and the gcloud commands are running.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_wKjT" id="using-zeppelin-notebooks">Using Zeppelin Notebooks<a href="#using-zeppelin-notebooks" class="hash-link" aria-label="Direct link to Using Zeppelin Notebooks" title="Direct link to Using Zeppelin Notebooks" translate="no">​</a></h2>
<ul>
<li class="">Log into the Dataproc cluster and run zeppelin start.  The terminal will output three pieces of information that you will need later: username, password, and port number.  The output should look something like this:</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">NetID_nyu_edu@nyu-dataproc-m:~$ zeppelin start</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Zeppelin is starting with the following configuration:</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">-------------------------------------------------------</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Username: jp6546_nyu_edu</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Password: REDACTED</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Port: </span><span class="token number" style="color:hsl(35, 99%, 36%)">64739</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Zeppelin start                                             </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">[</span><span class="token plain">  OK  </span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">]</span><br></span></code></pre></div></div>
<ul>
<li class="">On an individual workstation that has the gcloud command installed (installation instructions for gcloud can be found here), run the following command (with PORT replaced with the port number from step 1):</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud compute </span><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> nyu-dataproc-m </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--project</span><span class="token plain"> hpc-dataproc-19b8 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--zone</span><span class="token plain"> us-central1-f -- </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-L</span><span class="token plain"> PORT:localhost:PORT</span><br></span></code></pre></div></div>
<p>In our example this command would be as follows using the output from step 1 :</p>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">gcloud compute </span><span class="token function" style="color:hsl(221, 87%, 60%)">ssh</span><span class="token plain"> nyu-dataproc-m </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--project</span><span class="token plain"> hpc-dataproc-19b8 </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">--zone</span><span class="token plain"> us-central1-f -- </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-N</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-L</span><span class="token plain"> </span><span class="token number" style="color:hsl(35, 99%, 36%)">64739</span><span class="token plain">:localhost:64739</span><br></span></code></pre></div></div>
<ul>
<li class="">In a web browser, navigate to <code>localhost:PORT</code>.</li>
<li class="">Log in by clicking the Login button in the upper right corner.  Use your credentials from step 1.</li>
<li class="">If you forget the password or the port number at any time, you can run the following commands to retrieve this information:</li>
</ul>
<div class="language-sh codeBlockContainer_ndbq theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_Zo7j"><pre tabindex="0" class="prism-code language-sh codeBlock_hgHP thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_EpfB"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">zeppelin get-port</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">zeppelin get-pass </span><br></span></code></pre></div></div>
<ul>
<li class="">When you are finished, run <code>zeppelin stop</code> to turn off the Zeppelin server.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_AAw7"><a href="https://github.com/NYU-RTS/rts-docs/blob/main/docs/cloud/04_dataproc/03_computation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OZ0G" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_RgrK"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/cloud/dataproc/data_management/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data management</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/cloud/on_prem_cloud/intro/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Research Technology Cloud</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Py9d thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mapreduce" class="table-of-contents__link toc-highlight">MapReduce</a><ul><li><a href="#mapreduce-word-count-example" class="table-of-contents__link toc-highlight">MapReduce Word Count Example</a></li></ul></li><li><a href="#spark" class="table-of-contents__link toc-highlight">Spark</a><ul><li><a href="#launching-an-interactive-spark-shell" class="table-of-contents__link toc-highlight">Launching an Interactive Spark Shell</a></li></ul></li><li><a href="#yarn-scheduler" class="table-of-contents__link toc-highlight">YARN Scheduler</a></li><li><a href="#using-hive" class="table-of-contents__link toc-highlight">Using Hive</a></li><li><a href="#using-trino" class="table-of-contents__link toc-highlight">Using Trino</a></li><li><a href="#using-conda" class="table-of-contents__link toc-highlight">Using Conda</a></li><li><a href="#using-jupyter-notebooks" class="table-of-contents__link toc-highlight">Using Jupyter Notebooks</a></li><li><a href="#using-zeppelin-notebooks" class="table-of-contents__link toc-highlight">Using Zeppelin Notebooks</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hpc@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HPC support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:hsrn-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HSRN support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:research-cloud-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email Research Cloud support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:srde-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email Secure Research Data Environment support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email general GenAI support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-research-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email GenAI for research support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://guides.nyu.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NYU Libraries Research Guides<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sites.google.com/nyu.edu/forc-camp/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">FORC camp<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.google.com/forms/d/e/1FAIpQLSeHnmkPdR_IvWnT6a7U_V3RpfmQrpS8hjxI11FNnsZMlrBa4g/viewform" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feedback</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Announcements</a></li><li class="footer__item"><a href="https://github.com/NYU-RTS/rts-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_NVDT"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with 💜 in NYC!</div></div></div></footer></div>
</body>
</html>